{% extends "blogapp/base.html" %}
{% load static %}
{% block content %}
    <div class="container">
      <div class="row">
  {% if xss %}

    {% autoescape off %}

      {% if  query %}

        <div class="col-12"><p class="lead">search for <strong>{{query}}</strong></p><br></div>

      {% endif %}
       <div class="col-12">
      {% if result %}

        {% for x in result %}

          <a href="{{x.get_url}}"><h2>{{x.title}}</h2></a>
          <p>{{x.admin_content|truncatewords:50}}</p>
		      <img src="{{ x.images.url }}" with="150" height="150">
            <br><hr>

        {% endfor %}
      {% else %}

        <script>
		function trackSearch(quer){
		    document.write("<p>Not Found: "+query+"</p>" );
		}
	        var query = (new URLSearchParams(window.location.search)).get('search');
	            if(query){
		        trackSearch(query)
		    }
        </script>
      {% endif %}
     </div>
    {% endautoescape %}

  {% else %}

    {% if  query %}

      <div class=col-12><p class="lead">search for <strong>{{query}}</strong></p></div>
    {% endif %}
    <div class="col-12">
    {% if result %}

      {% for x in result %}

        <a href="{{x.get_url}}"><h2>{{x.title}}</h2></a>
        <p>{{x.admin_content|truncatewords:50}}</p>
		    <img src="{{ x.images.url }}" with="150" height="150">
            <br><hr>
      {% endfor %}

    {% else %}
         <p class='lead'><strong>NOT FOUND:</strong> {{query}}</p>
    {% endif %}
    </div>
  {% endif %}
      </div>
    </div>
{% endblock %}
