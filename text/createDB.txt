create table if not exists users(id serial NOT NULL,username varchar(50) not null,password varchar(50) not null,email varchar(50) null,primary key(id,username), unique(username,email))
create table if not exists posts(postId serial primary key,author varchar(50),authorId int not null,title varchar(50),createDate DATE not null default current_date,updateDate DATE null default null,content varchar(300) default null, unique (title),constraint fk_author foreign key (author,authorId) references users(username,id))
create table if not exists comments(commentId serial not null primary key,postId int not null,parrentId int default null,title varchar(100) not null,createDate Date default current_date,unique(commentId),constraint fk_cmt foreign key (postId) references posts(postid),constraint fk_cmt_parent foreign key (parrentId) references comments(commentId))
create table if not exists tag(tagId serial not null primary key,title varchar(20) not null,unique (title))
create table if not exists post_tag(postId int not null,tagId int not null,primary key(postId, tagId), unique (postId, tagId),constraint fk_post foreign key (postId) references posts(postid),constraint fk_tag foreign key (tagId) references tag(tagId))
create table if not exists categories(catId serial primary key not null,title varchar(20) not null,unique (title))
create table if not exists post_cat(postId int not null,catId int not null,primary key (postId, catId),unique (postId, catId),constraint fk_post foreign key (postId) references posts(postid),constraint fk_cat foreign key (catId) references categories(catId))
